@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  @apply bg-slate-100 text-slate-900 selection:bg-brand-100 selection:text-brand-900;
}

/* Hide default browser eye icon for password fields */
input::-ms-reveal,
input::-ms-clear {
  display: none;
}

:root {
    --color-brand-start: #F09819;
    --color-brand-end: #FF512F;
    --color-brand-primary: #FF6B35;
    
    /* Default (Orange) Palette for initial load */
    --color-brand-50: #fff7ed;
    --color-brand-100: #ffedd5;
    --color-brand-200: #fed7aa;
    --color-brand-300: #fdba74;
    --color-brand-400: #fb923c;
    --color-brand-500: #f97316;
    --color-brand-600: #ea580c;
    --color-brand-700: #c2410c;
    --color-brand-800: #9a3412;
    --color-brand-900: #7c2d12;
    --color-brand-950: #431407;
}

/* =========================
   SCREEN preview (Desktop)
   ========================= */
.a4-preview {
  /* A4 preview size (approx @ 96dpi) */
  width: 794px;
  min-height: 1123px;
  height: auto;
  box-sizing: border-box;
  overflow: hidden;
}

/* =========================
   Mobile preview (scale)
   ========================= */
/* =========================
   Mobile preview (scale)
   ========================= */
@media (max-width: 1024px) {
  /* keep original A4 preview size inside scaled wrapper */
  .a4-preview {
    width: 794px;
    min-height: 1123px;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* shadow-md */
    margin-bottom: 2rem; /* Space between pages on mobile */
  }

  .a4-mobile-fit {
    width: 100%;
    display: flex;
    justify-content: center;
    overflow-x: hidden; 
    padding-bottom: 2rem;
  }

  .a4-mobile-scale {
    /* Use zoom for layout-affecting scale on mobile to remove whitespace */
    zoom: var(--a4-scale, 0.55);
    /* Disable transform to avoid double scaling */
    transform: none;
  }
}

@media (max-width: 640px) {
  .a4-mobile-scale {
    --a4-scale: 0.45;
  }
}

@media (max-width: 450px) {
  .a4-mobile-scale {
    --a4-scale: 0.38; /* Fits ~300px width */
  }
  .a4-preview {
    margin-left: 0; 
    margin-right: 0;
  }
}

/* =========================
   âœ… PDF EXPORT FIX
   - disable transforms during capture
   ========================= */
.pdf-export .a4-mobile-fit {
  overflow: visible !important;
}
.pdf-export .a4-mobile-scale {
  transform: none !important;
  zoom: 1 !important;
}
.pdf-export .a4-preview {
  min-height: 297mm !important; /* Force A4 height for PDF */
  height: auto !important; 
  width: 210mm !important;
}
.pdf-export .invoice-paper {
  box-shadow: none !important;
}

/* Force preview functionality during export even if hidden on mobile */
.pdf-export .invoice-preview-section {
  display: flex !important;
  position: absolute !important;
  top: 0;
  left: 0;
  width: 100%; /* or 210mm to be safe? 100% fits the A4 child */
  z-index: -50;
  visibility: visible !important;
  opacity: 1 !important; /* Ensure content is rendered for capture */
  background: white; /* Ensure clean background */
}

/* =========================
   PRINT / PDF (browser print)
   ========================= */
@media print {
  .a4-preview {
    width: 210mm !important;
    min-height: 297mm !important;
    height: auto !important;

    transform: none !important;
    zoom: 1 !important;

    box-sizing: border-box !important;
    overflow: hidden !important;
  }

  @page {
    size: A4;
    margin: 0;
  }

  body {
    background: white !important;
  }
}

/* Paper card */
.invoice-paper {
  @apply bg-white shadow-a4 mx-auto;
}

/* Table typography */
.invoice-table th,
.invoice-table td {
  @apply text-xs align-top;
}
